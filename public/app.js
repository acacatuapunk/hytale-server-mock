const socket=io();const elements={status:document.getElementById('status'),uptime:document.getElementById('uptime'),serverName:document.getElementById('server-name'),serverVersion:document.getElementById('server-version'),serverWorld:document.getElementById('server-world'),maxPlayers:document.getElementById('max-players'),maxPlayerCount:document.getElementById('max-player-count'),playerCount:document.getElementById('player-count'),playersList:document.getElementById('players-list'),logsContainer:document.getElementById('logs-container'),joinUsername:document.getElementById('join-username'),connectionInd:document.getElementById('connection-indicator'),btnJoin:document.getElementById('btn-join'),btnRestart:document.getElementById('btn-restart'),btnSaveWorld:document.getElementById('btn-saveworld'),btnClearPlayers:document.getElementById('btn-clear-players')};let players=[];function addLog(e){const t=document.createElement('p');t.className='log-entry',t.textContent=new Date().toLocaleTimeString()+' - '+e,elements.logsContainer.appendChild(t),elements.logsContainer.scrollTop=elements.logsContainer.scrollHeight}function updatePlayersList(){if(0===players.length)return void(elements.playersList.innerHTML='<p class="empty-state">Nenhum jogador conectado</p>');elements.playersList.innerHTML=players.map(e=>`<div class="player-card"><div class="player-name">${e.username}</div><div class="player-info">ID: ${e.id}</div><div class="player-info">${e.joinedAt}</div></div>`).join('')}function updateStatus(e){elements.status.textContent=e,elements.status.parentElement.style.color='online'===e?'#10b981':'#ef4444'}socket.on('connect',()=>{console.log('\ud83d\udd17 Conectado ao servidor'),updateStatus('online'),elements.connectionInd.classList.add('connected'),addLog('Conectado ao servidor do Hytale')}),socket.on('disconnect',()=>{console.log('\ud83d\udd0c Desconectado do servidor'),updateStatus('offline'),elements.connectionInd.classList.remove('connected'),addLog('Desconectado do servidor')}),socket.on('server:info',e=>{elements.serverName.textContent=e.name,elements.serverVersion.textContent=e.version,elements.serverWorld.textContent=e.worldName,elements.maxPlayers.textContent=e.maxPlayers});const updateUptime=setInterval(()=>{fetch('/api/server/info').then(e=>e.json()).then(e=>{elements.uptime.textContent=formatUptime(e.uptime)}).catch(e=>console.error(e))},1e3);function formatUptime(e){const t=Math.floor(e/3600),o=Math.floor(e%3600/60),r=e%60;return`${t}h ${o}m ${r}s`}elements.btnJoin.addEventListener('click',()=>{const e=elements.joinUsername.value.trim();e&&(fetch('/api/players/join',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:e})}).then(e=>e.json()).then(e=>{e.success&&(players.push(e.player),updatePlayersList(),elements.playerCount.textContent=players.length,elements.joinUsername.value='',addLog(`\ud83d\udc64 ${e.player.username} conectou`))}),catch(e=>console.error(e)))}),elements.btnRestart.addEventListener('click',()=>{alert('Funcionalidade de reinício será implementada'),addLog('\ud83d\udd04 Servidor reiniciado')}),elements.btnSaveWorld.addEventListener('click',()=>{alert('Funcionalidade de save será implementada'),addLog('\ud83d\udcbe Mundo salvo')}),elements.btnClearPlayers.addEventListener('click',()=>{confirm('Desconectar todos os jogadores?')&&(players=[],updatePlayersList(),elements.playerCount.textContent='0',addLog('\ud83d\uddd1\ufe0f Todos os jogadores foram desconectados'))});
